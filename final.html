<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="flor.png" />
  <title>Una √∫ltima cosita...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      margin: 0;
      padding: 2rem;
      background-image: url('fondo1.jpg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      background-attachment: fixed;
      font-family: 'Poppins', sans-serif;
      color: #4c1d95;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1, h2 {
      font-family: 'Dancing Script', cursive;
      color: #9333ea;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 5px rgba(255,255,255,0.7);
    }
    p {
      font-size: 1.1rem;
      line-height: 1.6;
      color: #5b21b6;
    }
    .card {
      background: rgba(255, 255, 255, 0.9);
      padding: 1.8rem;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      max-width: 600px;
      width: 100%;
      margin: 1.5rem 0;
      animation: fadeInZoom 1.2s ease;
      position: relative;
      z-index: 1;
    }
    @keyframes fadeInZoom {
      from { opacity: 0; transform: scale(0.95) translateY(20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .love-button {
      background: linear-gradient(45deg, #d291ff, #b88de0);
      color: white;
      padding: 12px 25px;
      font-family: 'Dancing Script', cursive;
      border-radius: 30px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: transform 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }
    .love-button:hover {
      transform: scale(1.08);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }
    .hidden-letter {
      display: none;
      background-color: #f3e8ff;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 0 15px #d8b4fe;
      margin-top: 1rem;
      animation: fadeInZoom 1s ease;
    }
    input[type=text] {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-top: 1rem;
      width: 80%;
      font-size: 1rem;
      box-sizing: border-box;
    }
    button {
      background-color: #c084fc;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      margin-top: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
      font-size: 1rem;
    }
    button:hover {
      background-color: #a855f7;
    }
    #errorMsg {
      color: red;
      margin-top: 0.5rem;
      min-height: 1.2rem;
    }
    /* Tres en raya dif√≠cil y f√°cil */
    #tresEnRaya, #tresEnRayaFacil {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      grid-gap: 8px;
      margin: 20px auto;
    }
    #tresEnRaya div, #tresEnRayaFacil div {
      background: #fff;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      border-radius: 10px;
      cursor: pointer;
      user-select: none;
    }
    #tresEnRaya div.disabled, #tresEnRayaFacil div.disabled {
      cursor: default;
      background: #eee;
    }
    .message {
      font-weight: bold;
      margin-top: 10px;
      text-align: center;
      color: #4c1d95;
    }
    #victorias {
      font-weight: bolder;
      color: #9333ea;
    }
  </style>
</head>
<body>

  <!-- Cartas y contenido -->
  <div class="card">
    <h1>üå∏ Algo peque√±o que decirte</h1>
    <p>lo que te tengo que preguntar siempre me da miedo porque no se cual sea tu respuesta... </p>
  </div>

  <div class="card">
    <h1>üíå Una versi√≥n rara</h1>
    <p>Mantenimiento...</p>
  </div>

  <div class="card">
    <h1>üå∑ Un recuerdo</h1>
    <p>¬øTe acuerdas de la primera p√°gina? <br><a href="x.html" class="love-button">Visitar</a></p>
  </div>

  <!-- Barra √∫nica para claves y comandos -->
  <div class="card">
    <h1>üîë Claves y comandos</h1>
    <input type="text" id="inputComando" placeholder="Escribe clave o comando aqu√≠..." autocomplete="off" />
    <button onclick="procesarInput()">Enviar</button>
    <div id="errorMsg"></div>

    <!-- Cartas secretas -->
    <div id="cartaSecreta" class="hidden-letter">
      <p> estoy escribiendo estando en tu fiesta porque se me va la inspiraci√≥n. (no puedo ser serio para nada)  
      Mira la verdad... Una vez si me doli√≥, me quemo te juro que casi estaba pa llorar, pero ya dos veces. Es para preguntarme muchas cosas. </p>
    </div>
    <div id="cartaExtra" class="hidden-letter">
      <p>me quieres? No me quieres? Juegas conmigo? Que soy para ti? <br> <br> mira yo se que era tu fiesta, estabas con tus amigos pero encerio vivi la peor gosteada de mi vida. Yo te pregunt√© ¬øquieres que vaya? Y cual fue tu respuesta..  <br><BR> Esta bien no me siento mal por  eso, lo que me da cosa es que tampoco eres para explicar, dime tus razones. Aveces uno se cansa de pedir perd√≥n por algo que ni sabes. Si hice algo malo perd√≥n, pero no entiendo <BR><BR><br> y aunque la verdad ya te lo eh preguntado muchas veces te lo vuelvo a preguntar ¬øme quedo‚ù§Ô∏è o me voyüíî?  </p>
    </div>
    <div id="carta3" class="hidden-letter">
      <p>mira alomejor tampoco tengo derecho de preguntar eso, porque no somos nada, aunque para mi si eras algo, no una novia algo que se siente muy bonito (hablando de bonito te vez hermosa hoy eh) eras algo el lo que no paro de pensar, algo que ame en secreto por miedo a ser rechazado, no se que tienes que fascina, solo que aveces no entiendo üòî.<BR><BR> Tu misma te has dicho loca, te has dicho inmadura, pero ahora si que "por loca inmadura me encantas" pero por favor explicame, dime que pasa. </p>
    </div>

  </div>

  <!-- Juego Tres en Raya Dif√≠cil (visible siempre) -->
  <div class="card">
    <h1>Tres en Raya (Dif√≠cil)</h1>
    <p>Gana para desbloquear las cartas secretas:<br>
      - 3 victorias Primera clave<br>
      - 6 victorias Segunda clave<br>
      - 10 victorias Tercera clave
    </p>
    <div id="tresEnRaya"></div>
    <div class="message" id="gatoMensaje">Turno: ‚ùå</div>
    <div class="message">Victorias: <span id="victorias">0</span></div>
    <div class="message" id="claveDesbloqueada"></div>
    <button onclick="reiniciarGato()">Reiniciar Juego</button>
  </div>

  <!-- Juego Tres en Raya F√°cil (oculto, se muestra con comando) -->
  <div class="card" id="juegoFacilContainer" style="display:none;">
    <h1>üéÆ Desaf√≠o Tres en Raya (F√°cil)</h1>
    <p>Este juego se activa con el comando <code>dificultad facil</code>. ¬°Divi√©rtete! ü•≥</p>
    <div id="tresEnRayaFacil"></div>
    <div class="message" id="gatoMensajeFacil" style="font-weight:bold; margin: 10px 0;">Turno: ‚ùå</div>
    <button onclick="reiniciarGatoFacil()">Reiniciar Juego F√°cil</button>
  </div>

  <!-- Chatbot oculto por defecto -->
  <div class="card" id="chatbot" style="display:none;">
    <h1>üí¨ Chatbot</h1>
    <div id="messages" style="background: #fff; border-radius: 8px; padding: 10px; height: 250px; overflow-y: auto; box-shadow: inset 0 0 5px rgba(0,0,0,0.1);"></div>
    <input type="text" id="userInput" placeholder="Pregunta algo..." autocomplete="off" />
    <button onclick="handleUserInput()">Enviar</button>
  </div>

  <script>
    // Variables globales
    let victorias = 0;
    let dificultad = 'dificil'; // por defecto dif√≠cil

    // Mostrar cartas seg√∫n victorias
    function mostrarClaveSegunVictorias() {
      const carta1 = document.getElementById("cartaSecreta");
      const carta2 = document.getElementById("cartaExtra");
      const carta3 = document.getElementById("carta3");
      const claveDesbloqueada = document.getElementById("claveDesbloqueada");
      claveDesbloqueada.textContent = '';
      carta1.style.display = 'none';
      carta2.style.display = 'none';
      carta3.style.display = 'none';

      if (victorias >= 3) {
        carta1.style.display = 'block';
        claveDesbloqueada.textContent = 'Primera clave desbloqueada: pies';
      }
      if (victorias >= 6) {
        carta2.style.display = 'block';
        claveDesbloqueada.textContent = 'Segunda clave desbloqueada: rosariotijeras';
      }
      if (victorias >= 10) {
        carta3.style.display = 'block';
        claveDesbloqueada.textContent = 'Tercera clave desbloqueada: besar?';
      }
    }

    // PROCESAR ENTRADA (comandos y claves)
    function procesarInput() {
      const input = document.getElementById('inputComando');
      const texto = input.value.trim().toLowerCase();
      const errorMsg = document.getElementById('errorMsg');
      errorMsg.textContent = '';
      input.value = '';

      if (!texto) return;

      // Comandos
      if (texto === 'ver claves') {
        alert('Claves disponibles:\npies\nrosariotijeras\nbesar?');
        return;
      }
      if (texto === 'dificultad facil') {
        dificultad = 'facil';
        document.getElementById('juegoFacilContainer').style.display = 'block';
        document.getElementById('chatbot').style.display = 'none';
        alert('Dificultad cambiada a F√°cil. Juego f√°cil activado. Chatbot oculto.');
        return;
      }
      if (texto === 'dificultad dificil') {
        dificultad = 'dificil';
        document.getElementById('juegoFacilContainer').style.display = 'none';
        alert('Dificultad cambiada a Dif√≠cil. Juego dif√≠cil activado.');
        return;
      }
      if (texto === 'mostrar chatbot') {
        document.getElementById('chatbot').style.display = 'block';
        alert('Chatbot visible.');
        return;
      }
      if (texto === 'ocultar chatbot') {
        document.getElementById('chatbot').style.display = 'none';
        alert('Chatbot oculto.');
        return;
      }

      // Claves
      if (texto === '1') {
        mostrarSoloCarta('cartaSecreta');
        return;
      }
      if (texto === '2') {
        mostrarSoloCarta('cartaExtra');
        return;
      }
      if (texto === '3') {
        mostrarSoloCarta('carta3');
        return;
      }

      errorMsg.textContent = 'Clave o comando incorrecto.';
    }

    function mostrarSoloCarta(idCarta) {
      const cartas = ['cartaSecreta', 'cartaExtra', 'carta3'];
      cartas.forEach(id => {
        document.getElementById(id).style.display = (id === idCarta) ? 'block' : 'none';
      });
    }

    // ----------------- Juego Dif√≠cil -------------------

    let tablero = Array(9).fill('');
    let turno = '‚ùå';
    let juegoTerminado = false;

    const div = document.getElementById('tresEnRaya');
    const mensaje = document.getElementById('gatoMensaje');
    const victoriasSpan = document.getElementById('victorias');

    function dibujarGato() {
      div.innerHTML = '';
      tablero.forEach((celda, i) => {
        const celdaDiv = document.createElement('div');
        celdaDiv.textContent = tablero[i];
        celdaDiv.className = (juegoTerminado || tablero[i]) ? 'disabled' : '';
        celdaDiv.onclick = () => jugar(i);
        div.appendChild(celdaDiv);
      });
    }

    function jugar(i) {
      if (tablero[i] || juegoTerminado) return;
      if (turno !== '‚ùå') return; // jugador es ‚ùå
      tablero[i] = '‚ùå';
      actualizarEstado();
      if (!juegoTerminado) {
        turno = '‚≠ï';
        mensaje.textContent = `Turno: ${turno}`;
        setTimeout(() => ia(), 300);
      }
    }

    // IA con Minimax (muy dif√≠cil)
    function ia() {
      if (juegoTerminado) return;
      let mejorPuntaje = -Infinity;
      let mejorMovimiento = -1;
      for (let i = 0; i < 9; i++) {
        if (tablero[i] === '') {
          tablero[i] = '‚≠ï';
          let puntaje = minimax(tablero, false);
          tablero[i] = '';
          if (puntaje > mejorPuntaje) {
            mejorPuntaje = puntaje;
            mejorMovimiento = i;
          }
        }
      }
      tablero[mejorMovimiento] = '‚≠ï';
      actualizarEstado();
    }

    function minimax(tableroActual, esMaximizador) {
      const ganador = verificarGanador(tableroActual);
      if (ganador !== null) {
        if (ganador === '‚≠ï') return 10;
        else if (ganador === '‚ùå') return -10;
        else if (ganador === 'empate') return 0;
      }

      if (esMaximizador) {
        let mejorPuntaje = -Infinity;
        for (let i = 0; i < 9; i++) {
          if (tableroActual[i] === '') {
            tableroActual[i] = '‚≠ï';
            let puntaje = minimax(tableroActual, false);
            tableroActual[i] = '';
            mejorPuntaje = Math.max(puntaje, mejorPuntaje);
          }
        }
        return mejorPuntaje;
      } else {
        let mejorPuntaje = Infinity;
        for (let i = 0; i < 9; i++) {
          if (tableroActual[i] === '') {
            tableroActual[i] = '‚ùå';
            let puntaje = minimax(tableroActual, true);
            tableroActual[i] = '';
            mejorPuntaje = Math.min(puntaje, mejorPuntaje);
          }
        }
        return mejorPuntaje;
      }
    }

    function verificarGanador(tableroEval) {
      const lineas = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for (const [a,b,c] of lineas) {
        if (tableroEval[a] && tableroEval[a] === tableroEval[b] && tableroEval[a] === tableroEval[c]) {
          return tableroEval[a];
        }
      }
      if (tableroEval.every(c => c !== '')) return 'empate';
      return null;
    }

    function actualizarEstado() {
      dibujarGato();
      const ganador = verificarGanador(tablero);
      if (ganador) {
        juegoTerminado = true;
        if (ganador === '‚ùå') {
          mensaje.textContent = '¬°Ganaste! ';
          victorias++;
          victoriasSpan.textContent = victorias;
          mostrarClaveSegunVictorias();
        } else if (ganador === '‚≠ï') {
          mensaje.textContent = 'Perdiste ';
        } else {
          mensaje.textContent = 'Empate ';
        }
        return;
      }
      turno = turno === '‚ùå' ? '‚≠ï' : '‚ùå';
      mensaje.textContent = `Turno: ${turno}`;
    }

    function reiniciarGato() {
      tablero = Array(9).fill('');
      turno = '‚ùå';
      juegoTerminado = false;
      mensaje.textContent = `Turno: ‚ùå`;
      dibujarGato();
    }

    // Iniciar dibujo
    dibujarGato();

    // ----------------- Juego F√°cil -------------------

    let tableroFacil = Array(9).fill('');
    let turnoFacil = '‚ùå';
    let juegoTerminadoFacil = false;

    const divFacil = document.getElementById('tresEnRayaFacil');
    const mensajeFacil = document.getElementById('gatoMensajeFacil');

    function dibujarGatoFacil() {
      divFacil.innerHTML = '';
      tableroFacil.forEach((celda, i) => {
        const celdaDiv = document.createElement('div');
        celdaDiv.textContent = tableroFacil[i];
        celdaDiv.className = (juegoTerminadoFacil || tableroFacil[i]) ? 'disabled' : '';
        celdaDiv.onclick = () => jugarFacil(i);
        divFacil.appendChild(celdaDiv);
      });
    }

    function jugarFacil(i) {
      if (tableroFacil[i] || juegoTerminadoFacil) return;
      if (turnoFacil !== '‚ùå') return;
      tableroFacil[i] = '‚ùå';
      actualizarEstadoFacil();
      if (!juegoTerminadoFacil) {
        turnoFacil = '‚≠ï';
        mensajeFacil.textContent = `Turno: ${turnoFacil}`;
        setTimeout(() => iaFacil(), 300);
      }
    }

    function iaFacil() {
      if (juegoTerminadoFacil) return;
      let jugadasLibres = [];
      for (let i = 0; i < 9; i++) {
        if (tableroFacil[i] === '') jugadasLibres.push(i);
      }
      if (jugadasLibres.length === 0) return;
      const movimiento = jugadasLibres[Math.floor(Math.random() * jugadasLibres.length)];
      tableroFacil[movimiento] = '‚≠ï';
      actualizarEstadoFacil();
    }

    function verificarGanadorFacil(tableroEval) {
      const lineas = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for (const [a,b,c] of lineas) {
        if (tableroEval[a] && tableroEval[a] === tableroEval[b] && tableroEval[a] === tableroEval[c]) {
          return tableroEval[a];
        }
      }
      if (tableroEval.every(c => c !== '')) return 'empate';
      return null;
    }

    function actualizarEstadoFacil() {
      dibujarGatoFacil();
      const ganador = verificarGanadorFacil(tableroFacil);
      if (ganador) {
        juegoTerminadoFacil = true;
        if (ganador === '‚ùå') {
          mensajeFacil.textContent = '¬°Ganaste! ';
          victorias++;
          victoriasSpan.textContent = victorias;
          mostrarClaveSegunVictorias();
        } else if (ganador === '‚≠ï') {
          mensajeFacil.textContent = 'Perdiste ';
        } else {
          mensajeFacil.textContent = 'Empate ';
        }
        return;
      }
      turnoFacil = turnoFacil === '‚ùå' ? '‚≠ï' : '‚ùå';
      mensajeFacil.textContent = `Turno: ${turnoFacil}`;
    }

    function reiniciarGatoFacil() {
      tableroFacil = Array(9).fill('');
      turnoFacil = '‚ùå';
      juegoTerminadoFacil = false;
      mensajeFacil.textContent = `Turno: ‚ùå`;
      dibujarGatoFacil();
    }

    // Inicia juego f√°cil para cuando se muestre
    dibujarGatoFacil();

    // -------------------- Chatbot -------------------

    // Simplicidad: responder√° con mensajes simples
    const chatbotDiv = document.getElementById('chatbot');
    const messagesDiv = document.getElementById('messages');
    const userInput = document.getElementById('userInput');

    const respuestas = {
      'hola': 'Hola, ¬øen qu√© puedo ayudarte?',
      '¬øc√≥mo est√°s?': 'Estoy bien, gracias por preguntar :)',
      'adi√≥s': '¬°Hasta luego! Que tengas un buen d√≠a.',
      // Agrega m√°s preguntas y respuestas seg√∫n necesites
    };

    function handleUserInput() {
      const pregunta = userInput.value.trim().toLowerCase();
      if (!pregunta) return;
      appendMessage('T√∫', pregunta);
      userInput.value = '';
      setTimeout(() => {
        let respuesta = respuestas[pregunta] || 'Lo siento, no entiendo esa pregunta.';
        appendMessage('Bot', respuesta);
      }, 700);
    }

    function appendMessage(quien, texto) {
      const msg = document.createElement('div');
      msg.textContent = `${quien}: ${texto}`;
      messagesDiv.appendChild(msg);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }
  </script>
</body>
</html>
